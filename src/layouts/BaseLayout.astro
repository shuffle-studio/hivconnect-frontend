---
import { getCurrentLanguage } from '../i18n/astro-utils';
import '../styles/global.css';

export interface Props {
  title: string;
  description: string;
  type?: 'website' | 'article';
  image?: string;
}

const { title, description, type = 'website', image } = Astro.props;
const canonicalURL = new URL(Astro.url.pathname, Astro.site);
const currentLanguage = getCurrentLanguage(Astro.currentLocale);
---

<!DOCTYPE html>
<html lang={currentLanguage} class="h-full">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
  <meta name="generator" content={Astro.generator} />
  
  <!-- SEO Meta Tags -->
  <title>{title} | HIV Connect Central NJ</title>
  <meta name="description" content={description} />
  <link rel="canonical" href={canonicalURL} />
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content={type} />
  <meta property="og:url" content={canonicalURL} />
  <meta property="og:title" content={`${title} | HIV Connect Central NJ`} />
  <meta property="og:description" content={description} />
  <meta property="og:site_name" content="HIV Connect Central NJ" />
  {image && <meta property="og:image" content={image} />}
  
  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image" />
  <meta property="twitter:url" content={canonicalURL} />
  <meta property="twitter:title" content={`${title} | HIV Connect Central NJ`} />
  <meta property="twitter:description" content={description} />
  {image && <meta property="twitter:image" content={image} />}
  
  <!-- Accessibility -->
  <meta name="theme-color" content="#0D9488" />

  <!-- Preload critical fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Source+Serif+4:wght@600;700&display=swap" rel="stylesheet" />
  
  <!-- Schema.org structured data -->
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "MedicalOrganization",
      "name": "HIV Connect Central NJ",
      "description": "Comprehensive HIV care coordination and resources for Middlesex, Somerset, and Hunterdon counties in New Jersey",
      "url": "https://hivconnectcnj.org",
      "areaServed": [
        {
          "@type": "AdministrativeArea",
          "name": "Middlesex County, NJ"
        },
        {
          "@type": "AdministrativeArea", 
          "name": "Somerset County, NJ"
        },
        {
          "@type": "AdministrativeArea",
          "name": "Hunterdon County, NJ"
        }
      ],
      "medicalSpecialty": "HIV/AIDS Care",
      "availableService": [
        {
          "@type": "MedicalService",
          "name": "HIV Testing"
        },
        {
          "@type": "MedicalService", 
          "name": "HIV Treatment"
        },
        {
          "@type": "MedicalService",
          "name": "Case Management"
        }
      ]
    }
  </script>
</head>
<body class="min-h-full flex flex-col">
  <!-- Skip links for keyboard navigation and screen readers -->
  <div class="skip-links" role="navigation" aria-label="Skip navigation links">
    <a href="#main-content" class="skip-link">Skip to main content</a>
    <a href="#main-navigation" class="skip-link">Skip to navigation</a>
    <a href="#footer" class="skip-link">Skip to footer</a>
  </div>
  
  <!-- Crisis/Emergency Quick Access -->
  <div id="crisis-banner" class="bg-error-600 text-white text-center py-2 px-4 text-sm" role="banner" aria-label="Emergency crisis support information">
    <span class="font-medium">Crisis Support:</span>
    <a href="tel:988" class="underline hover:no-underline ml-2 font-bold">Call 988</a>
    <span class="mx-2">|</span>
    <a href="tel:18004484663" class="underline hover:no-underline">HIV/AIDS Hotline: 1-800-HIV-INFO</a>
  </div>
  
  <slot />
  

</body>
</html>